<div class="ajustes-container">
  <div class="ajustes-header">
    <div>
      <h1>
        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"></circle>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
        </svg>
        Ajustes del Negocio
      </h1>
      <p class="subtitle">Configura la información general de tu tienda</p>
    </div>
    <a routerLink="/admin/dashboard" class="btn-volver">
      <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
      Volver
    </a>
  </div>

  @if (loading()) {
    <div class="loading-state">
      <p>Cargando configuración...</p>
    </div>
  } @else if (error()) {
    <div class="error-state">
      <p>{{ error() }}</p>
      <button (click)="cargarConfiguracion()" class="btn-retry">
        Reintentar
      </button>
    </div>
  } @else {
    <div class="ajustes-content">
      <div class="config-form">

        <!-- Nombre del Negocio -->
        <div class="form-group">
          <label for="nombre_negocio">
            <span class="label-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
            </span>
            Nombre del Negocio
          </label>
          <input
            type="text"
            id="nombre_negocio"
            [value]="configuracion().nombre_negocio"
            (input)="actualizarCampo('nombre_negocio', $any($event.target).value)"
            placeholder="Ej: Sublisa"
            required
          />
          <small class="help-text">Este nombre aparecerá en tu tienda y comunicaciones</small>
        </div>

        <!-- Email de Contacto -->
        <div class="form-group">
          <label for="email_contacto">
            <span class="label-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
            </span>
            Email de Contacto
          </label>
          <input
            type="email"
            id="email_contacto"
            [value]="configuracion().email_contacto"
            (input)="actualizarCampo('email_contacto', $any($event.target).value)"
            placeholder="contacto@tunegocio.com"
            required
          />
          <small class="help-text">Email visible en el footer y para notificaciones</small>
        </div>

        <!-- WhatsApp Vendedor -->
        <div class="form-group">
          <label for="whatsapp_vendedor">
            <span class="label-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
              </svg>
            </span>
            WhatsApp del Vendedor
          </label>
          <input
            type="tel"
            id="whatsapp_vendedor"
            [value]="configuracion().whatsapp_vendedor"
            (input)="actualizarCampo('whatsapp_vendedor', $any($event.target).value)"
            placeholder="+5491138824544"
            required
          />
          <small class="help-text">Incluye código de país (ej: +54911XXXXXXXX)</small>
        </div>

        <!-- Mensaje de Bienvenida -->
        <div class="form-group">
          <label for="mensaje_bienvenida">
            <span class="label-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
              </svg>
            </span>
            Mensaje de Bienvenida
          </label>
          <textarea
            id="mensaje_bienvenida"
            [value]="configuracion().mensaje_bienvenida"
            (input)="actualizarCampo('mensaje_bienvenida', $any($event.target).value)"
            placeholder="¡Bienvenido a Sublisa! Tu tienda de productos de sublimación"
            rows="4"
          ></textarea>
          <small class="help-text">Mensaje que se enviará automáticamente por WhatsApp a nuevos clientes</small>
        </div>

        <!-- Dirección -->
        <div class="form-group">
          <label for="direccion">
            <span class="label-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                <circle cx="12" cy="10" r="3"></circle>
              </svg>
            </span>
            Dirección
          </label>
          <input
            type="text"
            id="direccion"
            [value]="configuracion().direccion"
            (input)="actualizarCampo('direccion', $any($event.target).value)"
            placeholder="Calle Balboa 6741"
            required
          />
          <small class="help-text">Dirección completa de tu negocio</small>
        </div>

        <!-- Localidad -->
        <div class="form-group">
          <label for="localidad">
            <span class="label-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
              </svg>
            </span>
            Localidad
          </label>
          <input
            type="text"
            id="localidad"
            [value]="configuracion().localidad"
            (input)="actualizarCampo('localidad', $any($event.target).value)"
            placeholder="González Catán"
            required
          />
          <small class="help-text">Ciudad o localidad donde está ubicado tu negocio</small>
        </div>

        <!-- Provincia -->
        <div class="form-group">
          <label for="provincia">
            <span class="label-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polygon points="1 6 1 22 8 18 16 22 23 18 23 2 16 6 8 2 1 6"></polygon>
                <line x1="8" y1="2" x2="8" y2="18"></line>
                <line x1="16" y1="6" x2="16" y2="22"></line>
              </svg>
            </span>
            Provincia
          </label>
          <input
            type="text"
            id="provincia"
            [value]="configuracion().provincia"
            (input)="actualizarCampo('provincia', $any($event.target).value)"
            placeholder="Buenos Aires"
            required
          />
          <small class="help-text">Provincia o estado</small>
        </div>

        <!-- Botones de Acción -->
        <div class="form-actions">
          <button
            type="button"
            class="btn-guardar"
            [disabled]="guardando()"
            (click)="guardarConfiguracion()"
          >
            @if (guardando()) {
              <span class="spinner"></span>
              Guardando...
            } @else {
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
                <polyline points="17 21 17 13 7 13 7 21"></polyline>
                <polyline points="7 3 7 8 15 8"></polyline>
              </svg>
              Guardar Cambios
            }
          </button>
        </div>

      </div>

      <!-- Panel de Información -->
      <div class="info-panel">
        <h3>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="12" y1="16" x2="12" y2="12"></line>
            <line x1="12" y1="8" x2="12.01" y2="8"></line>
          </svg>
          Información Importante
        </h3>
        <ul>
          <li>
            <strong>Nombre del Negocio:</strong> Se muestra en el título de la página y emails
          </li>
          <li>
            <strong>Email de Contacto:</strong> Aparece en el footer y se usa para notificaciones
          </li>
          <li>
            <strong>WhatsApp:</strong> Los clientes pueden contactarte directamente desde la tienda
          </li>
          <li>
            <strong>Mensaje de Bienvenida:</strong> Se incluye automáticamente al enviar pedidos por WhatsApp
          </li>
          <li>
            <strong>Ubicación:</strong> Se muestra en el footer y en las páginas de información
          </li>
        </ul>
      </div>
    </div>
  }
</div>
